# Maintainer: Florian LÃ©ger <florian6.leger@laposte.net>
# Contributor: Pierre Chapuis <catwell@archlinux.us>

pkgname=xspin
pkgver=5.2.5
pkgrel=1
pkgdesc="Tcl/Tk GUI for spin"
arch=('any')
url="http://spinroot.com/"
license=('custom')
depends=('spin' 'tk')
source=("http://spinroot.com/spin/src/xspin${pkgver//\./}.tcl"
        "xspin.desktop"
        "xspin.png")
md5sums=('4b41ff53c1834168aa183def9036bbb7'
         'f92080632284c1ed7692ecd377f3c39a'
         '6c1bfedb28f1219bf867ca3f3b05a56c')

build() {
  cd "$srcdir"
  sed -i 's~#!/bin/sh~#!/usr/bin/wish -f~' "xspin${pkgver//\./}.tcl"
}

package() {
  cd "$srcdir"
  install -Dm0755 "xspin${pkgver//\./}.tcl"  "$pkgdir/usr/bin/xspin"
  install -Dm0644 "/usr/share/licenses/spin/LICENSE.txt" \
    "$pkgdir/usr/share/licenses/$pkgname/LICENSE.txt"
  install -Dm0644 "xspin.desktop" \
    "$pkgdir/usr/share/applications/xspin.desktop"
  install -Dm0644 "xspin.png" \
    "$pkgdir/usr/share/icons/xspin.png"
}

