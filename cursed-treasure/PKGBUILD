# Maintainer: Florian LÃ©ger <florian6 dot leger at laposte dot net>

pkgname=cursed-treasure
pkgver=1.09.0019
pkgrel=1
pkgdesc='A neat Tower Defense game with new twists (Flash game).'
arch=('i686' 'x86_64')
url='http://www.iriysoft.ru/projects/flash/cursed-treasure'
license=('custom')
depends=()
[ "$CARCH" = i686   ] && depends=('flashplayer-standalone')
[ "$CARCH" = x86_64 ] && depends=('bin32-flashplayer-standalone')
_baseurl="http://iriysoft.ru/CT"
_swf="CursedTreasure.swf"
source=("${_baseurl}/${_swf}"
        "${pkgname}.desktop"
        "${pkgname}.png"
        "${pkgname}.sh")
md5sums=('35e1d34c3b83d5388f2794cf22789f31'
         '42e68388a482b0723096d076d3d39c40'
         '800d9ce68c863241ce4672dfcd2bdfbe'
         '00ba354d05d6ecf886522f11cc608b7f')

build() {
  # Install the .swf file
  install -D -m644 ${startdir}/${_swf} ${pkgdir}/usr/share/games/${pkgname}/${_swf} || return 1

  # Install launch script
  install -D -m755 ${startdir}/${pkgname}.sh ${pkgdir}/usr/bin/${pkgname} || return 1

  # Install .desktop file
  install -D -m644 ${startdir}/${pkgname}.desktop ${pkgdir}/usr/share/applications/${pkgname}.desktop || return 1

  # Install icon
  install -D -m644 ${startdir}/${pkgname}.png ${pkgdir}/usr/share/icons/${pkgname}.png || return 1
}

