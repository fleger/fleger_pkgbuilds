# Maintainer: Florian LÃ©ger <florian6 dot leger at laposte dot fr>

pkgname=nxt-python
pkgver=2.1.0
pkgrel=1
pkgdesc="A Python driver/interface for the Lego Mindstorms NXT robot."
arch=('any')
url='http://code.google.com/p/nxt-python/'
license=('GPL')
depends=('python2>=2.6')
optdepends=('python-pybluez: for Bluetooth support'
            'pyusb: for USB support'
)
makedepends=('python2-distribute')
conflicts=("lejos_nxj")
source=("http://nxt-python.googlecode.com/files/${pkgname}-${pkgver}.tar.gz"
        "70-lego.rules"
)
md5sums=('b8cc2142382dadd13f6b812ff6b305a5'
         'c449bd90ace95fa03b04c8d4e46fd613')

install="${pkgname}.install"

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  find -type f -print0 | xargs -0 sed -i -e 's/#!\/usr\/bin\/env python/#!\/usr\/bin\/env python2/g'
  python2 setup.py install --root="${pkgdir}" --optimize=1 || return 1
  install -m644 -D ${srcdir}/70-lego.rules ${pkgdir}/etc/udev/rules.d/70-lego.rules || return 1
}

