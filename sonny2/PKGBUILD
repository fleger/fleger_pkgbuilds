# Maintainer: Florian LÃ©ger <florian6 dot leger at laposte dot net>

pkgname=sonny2
pkgver=2.2
pkgrel=1
pkgdesc='Combat based RPG where you play as a Zombie, level up and gain items to advance to the next Zone (Flash game).'
arch=('i686' 'x86_64')
url='http://armorgames.com/'
license=('custom')
makedepends=("imagemagick")
depends=()
[ "$CARCH" = i686   ] && depends=('flashplayer-standalone')
[ "$CARCH" = x86_64 ] && depends=('bin32-flashplayer-standalone')
_baseurl="http://armorgames.com/files/games"
_baseiconurl="http://armorgames.com/files/thumbnails"
_iconextension="jpg"
_game="sonny-2-2900"
source=("${_baseurl}/${_game}.swf"
        "${pkgname}.desktop"
        "${_baseiconurl}/${_game}.${_iconextension}"
        "${pkgname}.sh")
md5sums=('795fbd9da1ceb8ac748b9b227f2def3c'
         'c2bbf4d570340ed010042acf040a1dcf'
         '26edd8d91235e7b52e591c597177fd0d'
         'e731c755a2aa63cd9fcf5e455fe12de1')

build() {
  # Convert icon format
  convert ${startdir}/${_game}.${_iconextension} ${srcdir}/${pkgname}.png || return 1
}

package() {
  # Install the .swf file
  install -D -m644 ${startdir}/${_game}.swf ${pkgdir}/usr/share/games/${pkgname}/${pkgname}.swf || return 1

  # Install launch script
  install -D -m755 ${startdir}/${pkgname}.sh ${pkgdir}/usr/bin/${pkgname} || return 1

  # Install .desktop file
  install -D -m644 ${startdir}/${pkgname}.desktop ${pkgdir}/usr/share/applications/${pkgname}.desktop || return 1

  # Install icon
  install -D -m644 ${srcdir}/${pkgname}.png ${pkgdir}/usr/share/icons/${pkgname}.png || return 1
}

