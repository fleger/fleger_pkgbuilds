# Maintainer: Florian LÃ©ger <florian6 dot leger at laposte dot net>
# Contributor: osily <ly50247@gmail.com>

pkgbase=flashplayer-standalone
pkgname=(flashplayer-standalone)
depends=('gtk2' 'libxt' 'nss' 'curl' 'desktop-file-utils')
[ "x$CARCH" = "xx86_64" ] && pkgname=('bin32-flashplayer-standalone')
[ "x$CARCH" = "xx86_64" ] &&  depends=('lib32-gtk2' 'lib32-libxt' 'lib32-nss' 'lib32-curl' 'desktop-file-utils')
pkgver=11.2.202.235
pkgrel=4
pkgdesc="Macromedia standalone flash player (nonfree)"
url="http://www.adobe.com/support/flashplayer/downloads.html"
license="custom"
arch=('i686' 'x86_64')
# License matrix: http://www.adobe.com/products/eulas/
source=("http://fpdownload.macromedia.com/pub/flashplayer/updaters/11/flashplayer_11_sa.i386.tar.gz"
        "http://www.adobe.com/products/eulas/pdfs/PlatformClients_PC_WWEULA-MULTI-20110809_1357.pdf"
        "gflashplayer.png"
        "flashplayer.desktop")
md5sums=('456c475817c3ddbb1399ce4cdf816cb8'
         '620a140c7e85af655f39f1b583fbf932'
         'b6b218eacdb3bc2efae9292526a8cd05'
         'd2d004343a89d221a6afb8a8b725b016')
options=(!strip)
install="$pkgbase.install"

package_flashplayer-standalone() {
  arch=('i686')
  cd "${srcdir}"
  install -Dm755 flashplayer "${pkgdir}/usr/bin/flashplayer"
  install -Dm644 flashplayer.desktop "${pkgdir}/usr/share/applications/flashplayer.desktop"
  install -Dm644 gflashplayer.png "${pkgdir}/usr/share/pixmaps/gflashplayer.png"
  install -Dm644 PlatformClients_PC_WWEULA-MULTI-20110809_1357.pdf "$pkgdir/usr/share/licenses/$pkgname/PlatformClients_PC_WWEULA-MULTI-20110809_1357.pdf"
}

package_bin32-flashplayer-standalone() {
  arch=('x86_64')
  provides=('flashplayer-standalone')
  cd "${srcdir}"
  install -Dm755 flashplayer "${pkgdir}/usr/bin/flashplayer"
  install -Dm644 flashplayer.desktop "${pkgdir}/usr/share/applications/flashplayer.desktop"
  install -Dm644 gflashplayer.png "${pkgdir}/usr/share/pixmaps/gflashplayer.png"
  install -Dm644 PlatformClients_PC_WWEULA-MULTI-20110809_1357.pdf "$pkgdir/usr/share/licenses/$pkgname/PlatformClients_PC_WWEULA-MULTI-20110809_1357.pdf"
}
